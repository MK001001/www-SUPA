<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <title>Hello, world!</title>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-11 col-md-5 offset-md-1">
          <div class="col-12 col-md-12 bg-success text-light text-center rounded-bottom">
            <h1>Temperature</h1>
          </div>
          <div class="input-group mb-3">
			<input type="number" class="form-control rounded" placeholder="Temperature" id="tempinput">
			<div class="input-group-append">
				<div class="col-12 btn-group">
					<select class="bg-info text-white rounded" id="temptype">
						<option value="0">Fahrenheit</option>
						<option value="1">Celsius</option>
					</select>
				</div>
			</div>
          </div>
	    </div>
        <div class="col-11 col-md-5">
          <div class="col-12 col-md-12 bg-success text-light text-center rounded-bottom">
            <h1>Result</h1>
          </div>
          <div class="input-group mb-3">
			<input type="number" class="form-control rounded" placeholder="Temperature" id="out" disabled>
			<div class="input-group-append">
				<div class="col-12 btn-group">
					<select class="bg-info text-white rounded" id="resulttype">
						<option value="0">Fahrenheit</option>
						<option value="1">Celsius</option>
					</select>
				</div>
			</div>
          </div>
        </div>
		<div class="col-12">
			<div class="row" id="tempdivs"></div>
		</div>
      </div>
    </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
	  <script>

		  let docG = (id) => {return document.getElementById(id);}
		  let conversions = []

		  let selectChanged = (e) => {
			  let temp = docG("tempinput").value;
			  let type = docG("temptype").value;
			  console.log("Temp type changed to: " + type);
			  console.log(temp)
			  convert()
		  }
		  
		  let convert = () => {
			  let temp = docG("tempinput").value;
			  let temptype = docG("temptype").value;
			  let out = docG("out").value
			  let resulttype = docG("resulttype").value
			  let converted = temp
			  
			  if (temptype == 0) {
				  converted = parseFloat(((temp - 32) * 5) / 9)
				  converted = converted.toFixed(2)
				  console.log(temp)
				  console.log(converted)
			  }
			  
			  else if (temptype == 1) {
				  converted = parseFloat(((temp * 1.8) + 32))
				  converted = converted.toFixed(2)
				  console.log(temp)
				  console.log(converted)
			  }
			  
			  conversions.push(converted)
			  console.log(conversions)
			  
			  let htm = ""
			  for (i = 0; i < conversions.length; i++){
				  if (temptype === 0){
					  htm += "<div class='col-12 col-md-6 border ml-4 mt-2 text-center p-2' id=temp_" + i + ">" + temp + " ˚ Fahrenheit = " + converted + " ˚ Celsius"
				  }
			  }
		  }
		  
		  
		  docG("temptype").addEventListener("change", selectChanged)
		  docG("resulttype").addEventListener("change", selectChanged)
		  docG("tempinput").addEventListener("change", convert)
		  docG("tempinput").addEventListener("keydown", function(e) {
			if (e.code === "Enter") {
				e.preventDefault;
				console.log("Enter pressed");
				convert();
			}
		  });
	  </script>
  </body>
</html>